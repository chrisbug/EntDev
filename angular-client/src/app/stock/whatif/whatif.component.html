<div class="col-md-12 col-lg-12">
  <div class="row" style="border: solid 2px;">
    <div class="col-md-12 col-lg-12">
      <div class="col-md-1">
        <p>Company</p>
      </div>
      <div class="col-md-1">
        <p>Symbol</p>
      </div>
      <div class="col-md-1">
        <p>Date In</p>
      </div>
      <div class="col-md-1">
        <p>QTY</p>
      </div>
      <div class="col-md-1">
        <p>Cost</p>
      </div>
      <div class="col-md-1">
        <p>Purches price</p>
      </div>
      <div class="col-md-1">
        <p>Price</p>
      </div>
      <div class="col-md-1">
        <p>Value</p>
      </div>
      <div class="col-md-1">
        <p>Gain/loss detail</p>
      </div>
      <div class="col-md-1">
        <p>Gain/loss %</p>
      </div>
      <div class="col-md-1">
        <p>Sale costs</p>
      </div>
    </div>
  </div>

<div class="row" style="border: solid 2px;" *ngIf="whatIfStockSelected">
  <div class="col-md-12 col-lg-12">
    <div class="col-md-1">
      <!-- company -->
      <p>{{whatIfStockSelected.company}}</p>
    </div>

    <div class="col-md-1">
      <!-- symbol  -->
      <p>{{whatIfStockSelected.exchange}}</p>
    </div>

    <div class="col-md-1">
      <!-- Date In -->
      <p>{{whatIfStockSelected.date | date:'shortDate'}}</p>
    </div>

    <div class="col-md-1">
      <!-- Qty -->
      <p>{{whatIfStockSelected.qty}}</p>
    </div>

    <div class="col-md-1">
      <!-- Cost -->
      <p>{{whatIfStockSelected.qty * whatIfStockSelected.price | number:maxFractionDigits}}</p>
    </div>

    <div class="col-md-1">
      <!-- Purches price -->
      <p>{{whatIfStockSelected.price}}</p>
    </div>

    <div class="col-md-1">
      <!-- price -->

      <input [(ngModel)]="whatIfPrice" type="text" />
    </div>

    <div class="col-md-1">
      <!-- value  -->
      <p>
        {{ whatIfPrice * whatIfStockSelected.qty | number:maxFractionDigits}}
      </p>
    </div>

    <div class="col-md-1">
      <!-- gain loss -->
      <p [ngStyle]="{'color':(whatIfPrice * whatIfStockSelected.qty) - (whatIfStockSelected.qty * whatIfStockSelected.price) > 0 ? 'green': 'red' }">
        {{ ( whatIfPrice * whatIfStockSelected.qty) - (whatIfStockSelected.qty * whatIfStockSelected.price)  | number:maxFractionDigits}}
      </p>
    </div>

    <div class="col-md-1">
      <!-- gain loss % -->
      <p [ngStyle]="{'color': (((whatIfPrice * whatIfStockSelected.qty) - (whatIfStockSelected.qty * whatIfStockSelected.price)) / (whatIfStockSelected.qty * whatIfStockSelected.price)) *100 > 0 ? 'green' : 'red' }">
        {{(((whatIfPrice * whatIfStockSelected.qty) - (whatIfStockSelected.qty * whatIfStockSelected.price)) / (whatIfStockSelected.qty * whatIfStockSelected.price)) *100 | number:maxFractionDigits}} %
      </p>
    </div>

    <div class="col-md-1">
      <!-- sale cost  -->
      <p>
        {{(saleValue(whatIfPrice * whatIfStockSelected.qty)) | number:maxFractionDigits}}
      </p>
    </div>
  </div>
</div>
  
  <div class="row" style="border: solid 2px;" *ngIf="user.holdings">
    <div class="col-md-12 col-lg-12" *ngFor="let value of user.holdings; let i = index">
      <div class="col-md-1">
        <!-- company -->
        <p>{{value.company}}</p>
      </div>

      <div class="col-md-1">
        <!-- symbol  -->
        <p>{{value.exchange}}</p>
      </div>

      <div class="col-md-1">
        <!-- Date In -->
        <p>{{value.date | date:'shortDate'}}</p>
      </div>

      <div class="col-md-1">
        <!-- Qty -->
        <p>{{value.qty}}</p>
      </div>

      <div class="col-md-1">
        <!-- Cost -->
        <p>{{value.qty*value.price | number:maxFractionDigits}}</p>
      </div>

      <div class="col-md-1">
        <!-- Purches price -->
        <p>{{value.price}}</p>
      </div>

      <div class="col-md-1">
        <!-- price -->
        <p *ngIf="value.exchange === 'ise'">
          {{ findCompany(iseResult.data, value.company) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'ftse'">
          {{ findCompany(ftseResult.data, value.company) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'coinranking'">
          {{ findCompany(coinResult.data, value.company) | number:maxFractionDigits}}
        </p>
      </div>

      <div class="col-md-1">
        <!-- value  -->
        <p *ngIf="value.exchange === 'ise'">
          {{ (findCompany(iseResult.data, value.company) * value.qty) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'ftse'">
          {{ (findCompany(ftseResult.data, value.company) * value.qty) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'coinranking'">
          {{ (findCompany(coinResult.data, value.company) * value.qty) | number:maxFractionDigits}}
        </p>
      </div>

      <div class="col-md-1">
        <!-- gain loss -->
        <p *ngIf="value.exchange === 'ise'" [ngStyle]="{'color':( (findCompany(coinResult.data, value.company)*value.qty) - (value.qty*value.price) ) > 0 ? 'green': 'red' }">
          {{ ( (findCompany(iseResult.data, value.company)*value.qty) - (value.qty*value.price) ) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'ftse'" [ngStyle]="{'color':( (findCompany(ftseResult.data, value.company)*value.qty) - (value.qty*value.price) ) > 0 ? 'green': 'red' }">
          {{ ( (findCompany(ftseResult.data, value.company)*value.qty) - (value.qty*value.price) ) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'coinranking'" [ngStyle]="{'color':( (findCompany(coinResult.data, value.company)*value.qty) - (value.qty*value.price) ) > 0 ? 'green' : 'red' }">
          {{ ( (findCompany(coinResult.data, value.company)*value.qty) - (value.qty*value.price) ) | number:maxFractionDigits }}
        </p>
      </div>

      <div class="col-md-1">
        <!-- gain loss % -->
        <p *ngIf="value.exchange === 'ise'" [ngStyle]="{'color':( ( (findCompany(iseResult.data, value.company) * value.qty) - (value.qty*value.price) )/ (value.qty*value.price) )*100 > 0 ? 'green' : 'red' }">
          {{( ( (findCompany(iseResult.data, value.company) * value.qty) - (value.qty*value.price) )/ (value.qty*value.price) )*100
          | number:maxFractionDigits}} %
        </p>
        <p *ngIf="value.exchange === 'ftse'" [ngStyle]="{'color':( ( (findCompany(ftseResult.data, value.company) * value.qty) - (value.qty*value.price) )/ (value.qty*value.price) )*100 > 0 ? 'green' : 'red' }">
          {{( ( (findCompany(ftseResult.data, value.company) * value.qty) - (value.qty*value.price) )/ (value.qty*value.price) )*100
          | number:maxFractionDigits}} %
        </p>
        <p *ngIf="value.exchange === 'coinranking'" [ngStyle]="{'color':( ( (findCompany(coinResult.data, value.company) * value.qty) - (value.qty*value.price) )/ (value.qty*value.price) )*100 > 0 ? 'green' : 'red' }">
          {{( ( (findCompany(coinResult.data, value.company) * value.qty) - (value.qty*value.price) )/ (value.qty*value.price) )*100
          | number:maxFractionDigits}} %
        </p>
      </div>

      <div class="col-md-1">
        <!-- sale cost  -->
        <p *ngIf="value.exchange === 'ise'">
          {{(saleValue(findCompany(iseResult.data, value.company) * value.qty)) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'ftse'">
          {{(saleValue(findCompany(ftseResult.data, value.company) * value.qty)) | number:maxFractionDigits}}
        </p>
        <p *ngIf="value.exchange === 'coinranking'">
          {{(saleValue(findCompany(coinResult.data, value.company) * value.qty)) | number:maxFractionDigits}}
        </p>
      </div>

      <div class="col-md-1">
        <button type="submit" (click)="setWhatIfStock(value)">What If
        </button>
      </div>
    </div>
  </div>
</div>